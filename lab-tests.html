<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lab Tests List | Sachdeva Diagnostics</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <nav class="navbar">
        <div class="logo"><a href="index.html"> <img src="images/Logo_Sachdeva-Final-Transparent.png" alt="Sachdeva Diagnostics Icon" class="logo-icon"> Sachdeva <span> Diagnostics</span></a></div>
        <div class="hamburger" onclick="toggleMenu()">
            ‚ò∞
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="facilities.html">Facilities</a></li>
            <li><a href="lab-tests.html">Tests & Scans</a></li>
            <li><a href="health-packages.html">Health Packages</a></li>
            <li><a href="loca.html">Contact Us</a></li>
            <li><a href="#">Blog</a></li>
        </ul>
    </nav>

    <section class="all-tests bg-white py-12 rounded-lg shadow-md m-4">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold text-blue-900 mb-2">Lab Tests</h2>
            <p class="text-gray-600 mb-6">Click on any test to book an appointment.</p>

            <div class="max-w-xl mx-auto mb-10 relative">
                <input type="text" id="testSearch" placeholder="üîç Search for any test..." class="w-full py-3 px-5 rounded-full border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
            </div>

            <div id="test-sections-container">
                </div>
             <div id="no-results" class="text-center text-gray-500 text-xl mt-10 hidden">
                <p>No tests found matching your search.</p>
            </div>
        </div>
    </section>

   <footer class="bg-gray-50 text-gray-700">
    <div id="home-collection" class="max-w-7xl mx-auto p-6 md:flex md:items-center md:justify-between bg-white rounded-t-3xl shadow-md">
        <div class="md:w-1/2 mb-6 md:mb-0">
            <img src="images/labtech - Copy.png" alt="Lab Technician" class="rounded-2xl w-full max-w-md mx-auto md:mx-0">
        </div>

        <div class="md:w-1/2 text-center md:text-left">
            <h2 class="text-2xl font-semibold text-center text-blue-900 mb-4 text">Book an appointment with us!</h2>
            <form id="bookingForm" class="space-y-4">
                
                <div class="relative" id="search-container">
                    <input type="text" id="testSearchInput" placeholder="Search for a Test *" required class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div id="searchResults" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto hidden">
                        </div>
                </div>

                <input id="fullName" type="text" placeholder="Full Name *" required class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">

                <div class="flex flex-col sm:flex-row gap-4">
                    <input id="age" type="number" placeholder="Age *" required class="w-full sm:w-1/2 px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <input id="phone" type="tel" placeholder="Phone Number *" required class="w-full sm:w-1/2 px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <input id="email" type="email" placeholder="Email (Optional)" class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">

                <div class="relative">
                    <input id="date" type="text" onfocus="(this.type='date')" onblur="(this.type='text')" placeholder="dd-mm-yyyy *" required class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="relative">
                    <select id="time" name="time" required class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white">
                        <option value="" disabled selected>Select preferred time slot *</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-700">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" /></svg>
                    </div>
                </div>

                <button type="submit" class="w-full bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition flex items-center justify-center h-12">
                    Book Appointment
                </button>
                <p class="text-xs text-gray-500 mt-2">We'll reach out to you shortly to confirm your appointment.</p>
                <p id="formMessage" class="text-sm text-center font-semibold hidden"></p>
            </form>
        </div>
        </div>

    <div class="bg-white max-w-7xl mx-auto px-6 py-10 grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-left">
        <div>
            <a href="index.html">
                <h3 class="flex items-center justify-center md:justify-start text-xl font-bold text-blue-800 mb-1">
                    <img src="images/Logo_Sachdeva-Final-Transparent.png" alt="Logo" class="w-8 h-8 mr-1">
                    Sachdeva <span class="text-red-700">Diagnostics</span>
                </h3>
            </a>
            <p class="text-sm text-gray-500">Pathology, And beyond.</p>
        </div>
        <div>
            <h4 class="text-lg font-semibold text-blue-900 mb-2">Quick Links</h4>
            <ul class="space-y-1 text-sm text-gray-600">
                <li><a href="about.html" class="hover:text-blue-500">About Us</a></li>
                <li><a href="lab-tests.html" class="hover:text-blue-500">Test List</a></li>
                <li><a href="loca.html" class="hover:text-blue-500">Location</a></li>
            </ul>
        </div>
        <div>
              <h4 class="text-lg font-semibold text-blue-900 mb-2">For Customers</h4>
            <ul class="space-y-1 text-sm text-gray-600">
                <li><a href="health-packages.html" class="hover:text-blue-500">Healthcare Packages</a></li>
                <li><a href="loca.html" class="hover:text-blue-500">Contact Us</a></li>
            </ul>
        </div>
        <div>
            <h4 class="text-lg font-semibold text-blue-900 mb-2">Opening Hour</h4>
            <ul class="text-sm text-gray-600 space-y-2">
                <li class="flex flex-col sm:flex-row sm:justify-between items-center">
                    <span>Monday-Saturday</span>
                    <span class="text-blue-500 font-medium">08:30am‚Äì07:30pm</span>
                </li>
                <li class="flex flex-col sm:flex-row sm:justify-between items-center">
                    <span>Sunday</span>
                    <span class="text-blue-500 font-medium">Closed</span>
                </li>
            </ul>
        </div>
    </div>

    <div class="bg-white border-t border-gray-200 py-6">
        <div class="max-w-7xl mx-auto px-6 
            flex flex-col items-center md:flex-row justify-between 
            text-sm text-gray-700 
            space-y-6 md:space-y-0">
            
            <div class="flex items-center space-x-3">
                <a href="tel:011-41600800">
                    <div class="bg-transparent p-4 rounded-full text-blue-700 text-2xl">
                        üìû
                    </div>
                </a>
                <div class="text-left">
                    <span class="text-sm font-bold text-black">Need Help? Book Lab Visit</span> <br> 
                    <span class="text-2xl text-blue-500 font-bold">011-41600800</span>
                </div>
            </div>

            <div class="text-lg flex items-center space-x-2 font-bold">
                ‚úâÔ∏è <a href="mailto:sachdevadiagnostics@yahoo.com" class="hover:text-blue-500">sachdevadiagnostics@yahoo.com</a>
            </div>

            <a href="https://www.google.com/maps/place/28%C2%B032'15.3%22N+77%C2%B015'22.9%22E/@28.5375711,77.2537896,17z/data=!3m1!4b1!4m4!3m3!8m2!3d28.5375711!4d77.2563645?entry=ttu&g_ep=EgoyMDI1MDgwNi4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="hover:text-blue-500 text-lg flex items-center space-x-2 font-bold text-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline-block text-red-500" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" />
                </svg>
                <span>D-616/ C R Park, New Delhi,¬†110019</span>
            </a>

            <div class="flex items-center justify-center space-x-4">
                <a href="#"><img src="https://www.svgrepo.com/show/183607/facebook.svg" class="w-6 h-6" alt="Facebook"></a>
                <a href="#"><img src="https://www.svgrepo.com/show/111199/instagram.svg" class="w-6 h-6" alt="Instagram"></a>
            </div>
        </div>
    </div>

    <div class="text-center text-sm text-gray-400 py-4">
        Copyright ¬©2024 <strong>Sachdeva Diagnostics</strong>, All Rights Reserved.
    </div>
</footer>

    
    <script>
        function toggleMenu() {
            const nav = document.getElementById("navLinks");
            nav.classList.toggle("show");
        }

        document.addEventListener('DOMContentLoaded', function() {
            // --- DATA ---
            const allTestsCategorized = {
                "Haematology": ["ABSOLUTE EOSINOPHIL COUNT (AEC)", "ABSOLUTE NEUTROPHIL COUNT (ANC)", "ABSOLUTE LYMPHOCYTE COUNT (ALC)", "APTT / PTT; ACTIVATED PARTIAL THROMBOPLASTIN TIME", "BLEEDING TIME : BT", "BLOOD GROUP: ABO AND Rh FACTOR", "CLOT RETRACTION TEST", "CLOTING TIME -CT", "COOMBS TEST-DIRECT", "COOMBS TEST- INDIRECT", "DIFFERENTIAL LEUCOCYTE COUNT : DLC", "ESR (Westergren)", "HB HPLC / ELECTROPHORESIS", "HbA1c :GLYCOSYLATED Hb", "HEMOGLOBIN: Hb", "MCH", "MCHC", "MCV", "MICROFILARIA DETECTION IN PERIPHERAL SMEAR", "MALARIAL PARASITE /BLOOD PARASITE :P/S FOR MP", "PCV Hematocrit)", "PERIPHERAL BLOOD SMEAR: BLOOD PICTURE", "PLATELET COUNT", "PT WITH INR", "RED CELL DISRTIBUTION WIDTH :RDW- CV", "RED CELL DISTRIBUTION WIDTH :RDW- SD", "RETICULOCYTE COUNT", "TOTAL LEUCOCYTE COUNT :TLC", "RED BLOOD CELLS : RBC COUNT"],
                "Biochemistry": ["ANGIOTENSIN CONVERTING ENZYME: ACE", "GLUCOSE / SUGAR - FASTING", "GLUCOSE / SUGAR- PP", "GLUCOSE /.SUGAR - RANDOM", "UREA ,SERUM", "CPK ‚Äì MB; CK ‚ÄìMB", "GLUCOSE CHALLENGE TEST :GCT", "GLUCOSE TOLERANCE TEST :GTT- PREGNANCY", "GLUCOSE TOLERANCE TEST -GTT-2.5 HOURS", "ACID PHOSPHATASE (PROSTATIC)", "ACID PHOSPHOTASE (TOTAL)", "FERRITIN,SERUM", "HOMOCYSTIENE QUANTITATIVE,SERUM", "MAGNESIUM,SERUM", "PROTEIN ELECTROPHORESIS,SERUM", "PROTEIN ELECTROPHORESIS, URINE", "TRANSFERRIN ,SERUM", "ALBUMIN ,SERUM", "ALKALINE PHOSPHATASE ,SERUM (ALP)", "AMYLASE ,SERUM", "BILIRUBIN (DIRECT) ,SERUM", "BILIRUBIN (INDIRECT) ,SERUM", "BILIRUBIN (TOTAL ,DIRECT AND INDIRECT)", "CALCIUM ,SERUM", "CHLORIDE ,SERUM", "CHOLESTROL ,SERUM", "CPK /CREATININE KINASE (CK)SERUM", "CREATININE ,SERUM", "HDL CHOLESTROL ,SERUM", "IRON , SERUM", "LACTATE DEHYDROGENASE ( LDH) ,SERUM", "LDL CHOLESTROL -DIRECT,SERUM", ".LIPASE ,SERUM", "PHOSPHOROUS ,SERUM", "POTASSIUM (K +) ,SERUM", "SODIUM (NA+)", "TOTAL PROTEIN ,SERUM", "TOTAL PROTEIN ,URINE", "TOTAL PROTEIN ,BODY FLUIDS", "TRIGLYCERIDES ,SERUM", "URIC ACID,SERUM", "VLDL,SERUM", "GAMMA GLUTAMYL TRANSPEPTIDASE (GGT),SERUM", "SGOT ;ASPARTATE AMINOTRANSFERASE (AST), SERUM", "SGPT ; (ALT)ALANINE AMINOTRANSFERASE, SERUM", "TIBC ,TOTAL IRON BINDING CAPACITY"],
                "Serology": ["AIDS (HIV 1&11)", "ALLERGY PANEL", "ANTI- CCP", "ANTI ds DNA ANTIBODIES", "ANTI ECHINOCOCCUS ANTIBODY", "ANTI CARDIOLIPN ANTIBODY.", "ANA ‚ÄìIF METHOD ,ANTINUCLEAR ANTIBODY", "ANA- ELISA METHOD ,ANTINUCLEAR ANTIBODY,", "ANTPHOSPHOLIPID IgG", "ANTPHOSPHOLIPID lgM", "ANTISPERM ANTBODIES", "ANTI Tg ,ANTITHROGLOBULIN ANTIBODY", "ANTI- TPO ,ANTITHYROID PEROXIDASE ANTIBODY", "ASO ‚Äì ANTISTREPTOLYSIN ANTIBODY WITH TITRE", "CYTOMEGALOVIRUS ANTIBODY lgG", "CYTOMEGALOVIRUS ANTIBODY - lgM", "COMPLEMENT C3", "CRP ,C REACTIVE PROTEIN WITH TITRE", "DENGUE- lgG & lgM", "DENGUE- NS1 ANTIGEN", "H. PYLORI- lgA", "H. PYLORI- IgG", "HEPATITIS A ANTIBODY (ANTI HAV) lgM", "HEPATITIS A ANTIBODY (ANTI HAV) TOTAL", "HEPATITIS B CORE ANTIBODY (ANTI HBc) lgM", "HEPATITIS CORE ANTIBODY (ANTI HBc) TOTAL", "HEPATITIS B ENVELOPE ANTIGEN (HBe Ag)", "HEPATITIS B SURFACE ANTIBODY (HBsAb)", "HEPATITIS SURFACE ANTIGEN (HBsAg )", "HEPATITIS B ENVELOPE ANTIBODY (HBe Ab)", "HEPATITIS C VIRUS( HCV) ANTIBODY; ICT METHOD FOR SCREENING", "HEPATITIS C VIRUS (HCV) ANTIBODY IgM", "HEPATITIS C VIRUS (HCV)ANTIBODY -TOTAL", "HEPATITIS E VIRUS (ANTI HEV) lgG", "HEPATITIS E VIRUS (ANTI HEV) lgM", "HERPES-1-IgG", "HERPES -1- IgM", "HERPES-2- lgG", "HERPES 2- lgM", "HSV 1 & 2- IgG/IgM", "(HSV) 1 &2‚ÄîlgM AND IgG", "hs- CRP (CARDIO)", "MALARIAL ANTIGEN", "RHEUMATOID ARTHRITIS (RA )FACTOR", "RUBELLA-lG", "RUBELLA-IgM", "IMMUNOGLOBULIN IgA", "IMMUNOGLOBULIN Ig E", "IMMUNOGLOBULIN IgG", "TUBERCULIN SKIN TEST / MANTOUX TEST", "TB GOLD ;QUANTIFERON ‚ÄìTB (IFN GAMMA TEST)", "Ttga ;ANTI TISSUE TRANSGLUTAMINASE IgA", "TORCH PANEL - lgG", "TORCH PANEL - lgM", "TOXOPLASMA- lgG", "TOXOPLASMA - IgM", "TPHA", "TYPHID0T", "VDRL", "WIDAL - SLIDE", "WIDAL- TUBE"],
                "Microbiology": ["AFB CULTURE", "BLOOD C·ª§LTURE AND SENSITIVITY (C/S)", "HIGH VAGINAL SWAB CULTURE AND SENSITIVITY (C/S)", "PCR FOR MYCO TUBERCULOSIS", "PUS - SWAB CUTURE AND SENSITIVITY (C/S)", "SEMEN- CULTURE AND SENSITIVITY (C/S)", "SKIN SCRAPPING FUNGUS", "SMEAR FOR AFB", "SMEAR FOR GRAM STAIN", "SPUTUM- CULTURE AND SENSITIVITY (C/S)", "STOOL- CULTURE AND SENSITIVITY(C/S)", "THROAT SWAB ‚ÄìCULTURE AND SENSITIVITY (C/S)", "WET MOUNT DIRECT SMEAR"],
                "Hormones": ["17-HYDROXYPROGESTRONE", "BETA HCG", "CORTISOL", "DHEA-S", "ESTRADIOL - E2", "ESTRIOL - E3", "FREE T3 ;FT3", "FREE T4 ;FT4", "FSH ;,FOLLICLE STIMULATING HORMONE", "GROWTH HORMONE ;GH", "HLA- B27", "INSULIN- FASTING", "INSULIN- PP", "INSULIN -RANDOM", "LH , LUTEINISING HORMONE", "PARATHYROID HORMONE ;PTH", "PROGESTERONE", "PROLACTIN", "TESTOSTERONE- FREE", "TESTOSTERONE-TOTAL", "TRIPPLE TEST", "TSH ;THYROID STIMULATING HORMONE"],
                "Drug and Vitamin Assays": ["CARBAMEZIPINE / TEGRETOL", "DIGOXIN", "DILANTIN / PHENYYTON", "FOLIC ACID", "LITHIUM", "VALPORIC ACID", "VITAMIN - B12", "VITAMIN D-25 HYDROXY"],
                "Cytology / Histology": ["BUCCAL SMEAR FOR BARR BODIES ( SEX CHROMATIN )", "CYTOLOGY ;FINE NEEDLE ASPIRATION (FNAC)", "CYTOLOGY ;BODY FLUIDS", "FNAC /PAP / BIOPSY SLIDES FOR OPINION", "HISTOPATHOLOGY (LARGE)", "HISTOPATHOLOGY (MEDIUM)", "HISTOPATHOLOGY (SMALL)", "CYTOLOGY GENITAL ; PAP SMEAR ;CONVENTIONAL", "CYTOLOGY GENITAL: PAP SMEAR ;LIQUiD BASED", "U/S GUIDED FNAC"],
                "Body Fluids": ["BODY FLUID EXAMINATION ROUTINE ( PLEURAL / ASCITIC / PERITONEAL / PERICARDIAL / SYNOVIAL / CSF/ NASAL )", "POST COITAL TEST ( PCT )", "SEMEN ANALYSIS", "SEMEN FRUCTOSE LEVEL"],
                "Tumor Markers": ["ALFA FETO PROTEINS ( AFP )", "CA- 19.9 PANCREATIC CANCER MARKER", "CA 72.4 GASTRIC CANCER MARKER", "CA-125 OVARIAN CANCER MARKER", "CEA CARCINOEMBRYONIC ANTIGEN", "PSA - (PROSTATE SPECIFIC ANTIGEN ) FREE", "PSA - (PROSTATE SPECIFIC ANTIGEN ) TOTAL"],
                "Stool": ["STOOL HANGING DROP PREPARATION", "STOOL OCCULT BLOOD", "pH & REDUCING SUBSTANCES", "STOOL- CUTURE & SENSITIVITY ;AEROBIC)", "STOOL ( CONCENTRATION METHOD)", "STOOL ANALYSIS -ROUTINE"],
                "Urine": ["24 HRS URINARY SODIUM", "24 HRS URINARY URIC ACID", "24HRS URINARY CALCIUM", "24HRS URINARY CATECHOLMINE", "24HRS URNARY.CHLORIDE", "24HRS URINARY CORTISOL", "24HRS URINARY CREATININE", "24HRS URINARY PROTIEN", "24HRS URINARY UREA", "ALBUMIN ,URINE", "ALBUMIN CREATININE RATIO (ACR)", "BENCE JONES PROTEINS", "BLE SALTS & BILE PIGMENT,URINE", "CHYLURIA", "CREATNINE CLEARANCE", "CYTOLOGY FOR ATYPICAL CELLS /PAP SMEAR ,URINE", "KETONE BODES / ACETONE ,URINE", "MICROALBUMINURIA (24 HRS)", "MICROALBUMINURIA (RANDOM)", "OCCULT BLOOD", "PREGNANCY TEST", "PROTEINS ,URINE", "PROTEIN CREATININE RATIO (PCR)", "SPECIFIC GRAVTY ,URINE", "SUGAR,URINE", "URINE CULTURE & SENSITIVITY", "URINE PROTEIN ELECTROPHORESIS", "URINE ROUTINE AND MICROSCOPY"],
                "Plain X-Rays": ["X-RAY CHEST PA / LAT / AP / APICOGRAM", "X-RAY ABDOMEN ERECT / SUPINE / KUB", "X-RAY CERVICAL SPINE AP / LAT / OBLIQUE", "X-RAY CERVICO-DORSAL SPINE LAT (Swimmers view)", "X-RAY DORSAL / THORACIC SPINE AP / LAT / OBLIQUE", "X-RAY LUMBAR SPINE AP / LAT (NEUTRAL / FLEXION / EXTENSION)", "X-RAY SACRO-COCGYGEAL SPINE AP / LAT", "X-RAY LIMB AP / LAT / OBLIQUE", "X-RAY JOINTS (SHOULDER, ELBOW, WRIST, HIP, KNEE, ANKLE)", "X-RAY T M JOINTS - (OPEN & CLOSED MOUTH)", "X-RAY SKULL AP / LAT / TOWNE'S", "X-RAY MASTOIDS SHULLER'S", "X-RAY ORBITS - AP & LAT", "X-RAY PNS WATER'S", "X-RAY STN AP/LAT", "X-RAY STYLOD PROCESSES", "X-RAYS CERAMIC PLATE"],
                "Contrast X-Ray Studies": ["BARIUM SWALLOW", "BARIUM MEAL UPPER GIT", "BARIUM MEAL FOLLOW THROUGH", "BARIUM ENEMA", "IVP (Intravenous Pyelography)", "HSG (HYSTERO-SALPINGOGRAPHY)", "SINOGRAM / FISTULOGRAM"],
                "Ultrasound Scans": ["ULTRASOUND ABDOMEN (UPPER/ LOWER/ WHOLE)", "ULTRASOUND ABDOMEN WITH INGUINAL REGION", "ULTRASOUND PELVIS", "ULTRASOUND PELVIS (TVS)", "ULTRASOUND CHEST (for pleural effusion)", "ULTRASOUND FOLLICULAR STUDY", "ULTRASOUND KUB WITH PVR", "ULTRASOUND KUB WITH PROSTATE & PVR", "ULTRASOUND SCROTUM / TESTIS", "ULTRASOUND SOFT TISSUE (NECK / AXILLA / MALE BREAST)", "ULTRASOUND THYROID GLAND", "ULTRASOUND SALIVARY GLANDS / CHEEK / FACE", "ULTRASOUND NECK LYMPH NODES", "ULTRASOUND EARLY PREGNANCY / VIABILITY SCAN", "ULTRASOUND EARLY PREGNANCY TVS", "NT / NB SCAN", "LEVEL II SCAN / ANOMALIES SCAN", "GROWTH SCAN", "GROWTH SCAN WITH BIOPHYSICAL PROFILE", "GROWTH SCAN WITH COLOUR DOPPLER"],
                "Colour Doppler Studies": ["ULTRASOUND PELVIS WITH CDFI", "VENOUS DOPPLER UPPER LIMB / LOWER LIMB"],
                "Electrocardiogram (ECG)": ["ECG / EKG"] 
            };
        const allTestsFlat = Object.values(allTestsCategorized).flat();
        const timeSlots = [
          "08:30 AM - 09:30 AM",
          "09:30 AM - 10:30 AM",
          "10:30 AM - 11:30 AM",
          "11:30 AM - 12:30 PM",
          "12:30 PM - 01:30 PM",
          "01:30 PM - 02:30 PM",
          "02:30 PM - 03:30 PM",
          "03:30 PM - 04:30 PM",
          "04:30 PM - 05:30 PM",
          "05:30 PM - 06:30 PM",
          "06:30 PM - 07:30 PM", 
        ];
            
            // --- LOGIC FOR TEST LISTING PAGE ---
            const sectionsContainer = document.getElementById('test-sections-container');
            if (sectionsContainer) {
                const initialDisplayCount = 6; // Changed to 6
                const icons = { "Haematology": "ü©∏", "Biochemistry": "üß™", "Serology": "üõ°Ô∏è", "Microbiology": "üî¨", "Hormones": "üß¨", "Drug and Vitamin Assays": "üíä", "Cytology / Histology": "üî¨", "Body Fluids": "üíß", "Tumor Markers": "üéóÔ∏è", "Stool": "üí©", "Urine": "üöΩ", "Plain X-Rays": "‚ò¢Ô∏è", "Contrast X-Ray Studies": "‚ò¢Ô∏è", "Ultrasound Scans": "üåä", "Colour Doppler Studies": "üé®", "Electrocardiogram (ECG)": "‚ù§Ô∏è" };
                
                sectionsContainer.innerHTML = '';
                for (const category in allTestsCategorized) {
                    const tests = allTestsCategorized[category];
                    const sectionDiv = document.createElement('div');
                    sectionDiv.className = 'test-section text-left mb-8';

                    const title = document.createElement('h3');
                    title.className = 'text-2xl font-semibold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2';
                    title.innerHTML = `${icons[category] || 'üß™'} ${category}`;
                    
                    const gridDiv = document.createElement('div');
                    gridDiv.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4';

                    // RENDER ALL TESTS, but hide the extra ones
                    tests.forEach((testName, index) => {
                        const link = document.createElement('a');
                        link.href = 'loca.html#booking-section';
                        link.className = 'test-link'; // Add a class for easier selection
                        if (index >= initialDisplayCount) {
                            link.classList.add('hidden', 'extra-test');
                        }
                        const testItem = document.createElement('div');
                        testItem.className = 'test-item border rounded-lg p-3 shadow-sm bg-gray-50 hover:bg-blue-100 hover:shadow-md transition-all duration-200 cursor-pointer h-full flex items-center';
                        testItem.innerHTML = `<h4 class="font-semibold text-gray-800">${testName}</h4>`;
                        link.appendChild(testItem);
                        gridDiv.appendChild(link);
                    });

                    sectionDiv.appendChild(title);
                    sectionDiv.appendChild(gridDiv);
                    
                    if (tests.length > initialDisplayCount) {
                        const buttonContainer = document.createElement('div');
                        buttonContainer.className = 'mt-4';

                        const viewMoreButton = document.createElement('button');
                        viewMoreButton.textContent = 'View More...';
                        viewMoreButton.className = 'view-more-btn text-blue-600 font-semibold hover:underline';
                        
                        const viewLessButton = document.createElement('button');
                        viewLessButton.textContent = 'View Less...';
                        viewLessButton.className = 'view-less-btn text-blue-600 font-semibold hover:underline hidden';

                        viewMoreButton.addEventListener('click', () => {
                            sectionDiv.querySelectorAll('.extra-test').forEach(testLink => {
                                testLink.classList.remove('hidden');
                            });
                            viewMoreButton.classList.add('hidden');
                            viewLessButton.classList.remove('hidden');
                        });

                        viewLessButton.addEventListener('click', () => {
                             sectionDiv.querySelectorAll('.extra-test').forEach(testLink => {
                                testLink.classList.add('hidden');
                            });
                            viewLessButton.classList.add('hidden');
                            viewMoreButton.classList.remove('hidden');
                        });
                        
                        buttonContainer.appendChild(viewMoreButton);
                        buttonContainer.appendChild(viewLessButton);
                        sectionDiv.appendChild(buttonContainer);
                    }
                    
                    sectionsContainer.appendChild(sectionDiv);
                }
            }

            // --- LOGIC FOR PAGE SEARCH BAR ---
            const pageSearchInput = document.getElementById('testSearch');
            if(pageSearchInput) {
                const testSections = document.querySelectorAll('.test-section');
                const noResultsDiv = document.getElementById('no-results');

                pageSearchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase().trim();
                    let totalMatches = 0;

                    testSections.forEach(section => {
                        const testLinks = section.querySelectorAll('.test-link');
                        const viewMoreBtn = section.querySelector('.view-more-btn');
                        const viewLessBtn = section.querySelector('.view-less-btn');
                        let sectionHasVisibleItems = false;
                        
                        if (searchTerm.length > 0) {
                            if (viewMoreBtn) viewMoreBtn.style.display = 'none';
                            if (viewLessBtn) viewLessBtn.style.display = 'none';

                            testLinks.forEach(link => {
                                const testName = link.querySelector('h4').textContent.toLowerCase();
                                if (testName.includes(searchTerm)) {
                                    link.classList.remove('hidden');
                                    sectionHasVisibleItems = true;
                                    totalMatches++;
                                } else {
                                    link.classList.add('hidden');
                                }
                            });
                        } else {
                            if (viewMoreBtn) viewMoreBtn.style.display = 'inline-block';
                            if (viewLessBtn) viewLessBtn.style.display = 'inline-block'; // Let the hidden class handle it

                             testLinks.forEach((link, index) => {
                                if (index >= initialDisplayCount && link.classList.contains('extra-test')) {
                                    if(!link.classList.contains('hidden')) {
                                        // This means view more was clicked, so we respect it unless view less is clicked
                                    }
                                } else {
                                    link.classList.remove('hidden');
                                }
                            });
                            sectionHasVisibleItems = true;
                        }
                        
                        section.style.display = sectionHasVisibleItems ? 'block' : 'none';
                    });
                    noResultsDiv.style.display = totalMatches === 0 && searchTerm !== '' ? 'block' : 'none';
                });
            }

            // --- LOGIC FOR BOOKING FORM (present in the footer) ---
            const bookingForm = document.getElementById("bookingForm");
            if (bookingForm) {
                const timeSelect = bookingForm.querySelector('#time');
                const testSearchInput = bookingForm.querySelector("#testSearchInput");
                const searchResults = bookingForm.querySelector("#searchResults");
                const searchContainer = bookingForm.querySelector("#search-container");
                
                if (timeSelect) {
                    timeSlots.forEach(slot => {
                        const option = document.createElement('option');
                        option.value = slot;
                        option.textContent = slot;
                        timeSelect.appendChild(option);
                    });
                }

                if (testSearchInput) {
                    testSearchInput.addEventListener('input', function() {
                        const query = this.value.toLowerCase();
                        searchResults.innerHTML = '';
                        if (query.length < 1) {
                            searchResults.classList.add('hidden');
                            return;
                        }
                        const filteredTests = allTestsFlat.filter(test => test.toLowerCase().includes(query));
                        if (filteredTests.length > 0) {
                            filteredTests.forEach(test => {
                                const resultItem = document.createElement('div');
                                resultItem.className = 'p-2 hover:bg-gray-100 cursor-pointer';
                                resultItem.textContent = test;
                                resultItem.addEventListener('click', function() {
                                    testSearchInput.value = this.textContent;
                                    searchResults.classList.add('hidden');
                                });
                                searchResults.appendChild(resultItem);
                            });
                            searchResults.classList.remove('hidden');
                        } else {
                            searchResults.classList.add('hidden');
                        }
                    });
                }

                document.addEventListener('click', function(e) {
                    if (searchContainer && !searchContainer.contains(e.target)) {
                        searchResults.classList.add('hidden');
                    }
                });

                bookingForm.addEventListener("submit", function (e) {
                    e.preventDefault();
                    const form = e.target;
                    const formData = {
                        test: form.querySelector("#testSearchInput").value.trim(),
                        fullName: form.querySelector("#fullName").value.trim(),
                        age: form.querySelector("#age").value.trim(),
                        phone: form.querySelector("#phone").value.trim(),
                        email: form.querySelector("#email").value.trim(),
                        date: form.querySelector("#date").value.trim(),
                        time: form.querySelector("#time").value.trim()
                    };
                    if (!formData.test || !formData.fullName || !formData.age || !formData.phone || !formData.date || !formData.time) {
                        alert("Please fill all required fields.");
                        return;
                    }
                    const messageBody = `üß™ *New Appointment Request*\n\n*Test*: ${formData.test}\n*Name*: ${formData.fullName}\n*Age*: ${formData.age}\n*Phone*: ${formData.phone}\n*Email*: ${formData.email || 'N/A'}\n*Address*: ${formData.address}\n*Date*: ${formData.date}\n*Time Slot*: ${formData.time}`;
                    const labNumber = "917052301394";
                    const waUrl = `https://wa.me/${labNumber}?text=${encodeURIComponent(messageBody)}`;
                    window.open(waUrl, "_blank");

                   setTimeout(() => {
                        formMessage.textContent = "Success! Please press 'Send' in WhatsApp to confirm your booking.";
                        formMessage.className = "text-sm text-center font-semibold text-green-600 block";
                        submitButton.disabled = false;
                        submitButton.innerHTML = originalButtonContent;
                        form.reset();
                    }, 1500);
                });
            }
        });
    </script>
</body>
</html>

